@page "/Register"
<PageTitle>Register</PageTitle>


<MudContainer MaxWidth="MaxWidth.Small" Style="max-width:500px">
    <MudText Typo="Typo.h4" Class="mb-3" Align="Align.Center">
        Login To GLSPM
    </MudText>
    <MudCard>
        <MudForm Model="@model" @ref="@form" Validation="@(validtor.ValidateValue)" ValidationDelay="0">
            <MudCardContent>
                <MudText Typo="Typo.h4" Align="Align.Center">
                    <MudFab HtmlTag="label"
                             Class="mx-auto"
                             Color="Color.Primary"
                             Icon="@Icons.Filled.CloudUpload"
                             Label="Upload Avatar"
                             for="@model.Avatar" />
                </MudText>

                <MudTextField @bind-Value="model.Username"
                              For="@(() => model.Username)"
                              Immediate="true"
                              Label="Username" />

                <MudTextField @bind-Value="model.Email"
                              For="@(() => model.Email)"
                              Immediate="true"
                              Label="Email" />

                <MudTextField @bind-Value="model.Password"
                              For="@(() => model.Password)"
                              Immediate="true"
                              Label="Password"
                              InputType="InputType.Password" />
            </MudCardContent>
        </MudForm>
        <MudCardActions>
            <MudButtonGroup Color="Color.Primary" Class="mx-auto" Variant="Variant.Text">
                <MudButton Link="./login">Login</MudButton>
                <MudButton @oncanplay="(async ()=> await Submit())">Register</MudButton>
            </MudButtonGroup>
        </MudCardActions>
    </MudCard>
</MudContainer>

@code {
    [Inject] ISnackbar Snackbar { get; set; }
    [Inject] IAccountsService AccountsService { get; set; }
    RegisterUserDto model = new RegisterUserDto();
    RegisterUserDtoValidator validtor = new RegisterUserDtoValidator();
    MudForm form;

    private async Task Submit()
    {
        await form.Validate();

        if (form.IsValid)
        {
            Snackbar.Add("Login faild");
        }
    }
}